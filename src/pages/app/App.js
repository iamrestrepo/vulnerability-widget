import React, { Component } from 'react';
import './App.css';
import MenuItem from '@material-ui/core/MenuItem';
import FormControl from '@material-ui/core/FormControl';
import Select from '@material-ui/core/Select';
import InputLabel from '@material-ui/core/InputLabel';
import Button from '@material-ui/core/Button';
import Graph from "../graph/Graph";

class App extends Component {
  constructor(props) {
    super(props);
    this.state = {
      data: {
        before: {
          low: 20,
          medium: 50,
          high: 100,
          critical: 120
        },
        after: {
          low: 20,
          medium: 120,
          high: 50,
          critical: 300
        }
      },
      filter: 'none'
    }
  }



  randomizeData = () => {
    this.setState({
      data: {
      before: {
        low: this.randomizeNumber(0, 100),
          medium: this.randomizeNumber(0, 100),
          high: this.randomizeNumber(0, 100),
          critical: this.randomizeNumber(0, 100)
      },
      after: {
        low: this.randomizeNumber(0, 100),
          medium: this.randomizeNumber(0, 100),
          high: this.randomizeNumber(0, 100),
          critical: this.randomizeNumber(0, 100)
      }
      }
    })
  };

  randomizeNumber = (min, max) => {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  };

  handleChange = (e) => {
    this.setState({
      filter: e.target.value
    })
  }

  render() {
    return (
      <div className="App">
        <div className="card">
          <Graph filter={this.state.filter} data={this.state.data}/>
          <div className="controlPanel">
            <FormControl className={'formControl'}>
              <InputLabel htmlFor="age-simple">Age</InputLabel>
              <Select
                value={this.state.filter}
                onChange={this.handleChange}
              >
                <MenuItem value="none">
                  <em>None</em>
                </MenuItem>
                <MenuItem value={'low'}>Low Only</MenuItem>
                <MenuItem value={'criticalOnly'}>Critical Only</MenuItem>
                <MenuItem value={'criticalAndHigh'}>Critical and High</MenuItem>
                <MenuItem value={'criticalHighMedium'}>Critical/High/Medium</MenuItem>
              </Select>
            </FormControl>
            <Button onClick={this.randomizeData} variant="contained" color="secondary">
              Randomize Data
            </Button>
          </div>
        </div>

      </div>
    );
  }
}

export default App;
